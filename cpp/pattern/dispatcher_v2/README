# dispatcher v2
only promise, no future

# create protobuf 
mkdir gen
protoc --cpp_out=./gen requestMsg.proto

# build on Linux
cd lib
mkdir build 
cd build
cmake ..
sudo make install

cd test_app/
mkdir build
cd build
cmake ..
sudo make install

# deploy on target board with bitbake
copy test_app/* to
nad/LGE/icon-src/asynctestapp

copy lib/* to
nad/LGE/icon-src/asynctiger

copy asynctiger.bb to nad/LGE/metalayer/meta-icon-nad/receipes-extended/asynctiger/

copy asynctestapp.bb to nad/LGE/metalayer/meta-icon-nad/receipes-extended/asyntestapp


-- build.
::lib
./build.sh target sa525m/apps debug module asynctiger cleanbuild

::app test
./build.sh target sa525m/apps debug module asynctestapp cleanbuild

Note:
can install binary, lib, header 
--> (1) with cmake: install(...) (check cmake file)
--> (2) or with bitbake using do_install() (check bb file)

-- other service (e.g nadproxy) use lib async_tiger.so
---> modify its bb file:
DEPENDS += "asynctiger"

---> modify makefile
e.g nadproxy/service/Makefile.am
nadProxy_CPPFLAGS += -std=c++17
nadProxy_LDFLAGS = -lasync_tiger

---> include below headers
#include "Dispatcher.h"
#include "Message.h"
#include "Promise.h"

-- fix bug c++17 error compiler on tiger
tiger use another typedef for byte 
but c++17 use std::byte
=> tiger need use namespace on byte tydedef
namespace TIGER_DEF {
    typedef byte ...
};

./framework/include/TCUProtocol.h:19:namespace TIGER_DEF {...};

tiger app use namespace: using namespace TIGER_DEF

./services/communication-service/include/CM_Parser.h:30:using namespace TIGER_DEF;
./servicelayer/core/services/communication-service/include/CM_Parser.h:25:using namespace TIGER_DEF;





